<?xml version="1.0" encoding="UTF-8"?>
<project_specification>
  <project_name>OneStack Workflow Extension</project_name>
  <version>2.0</version>
  <created>2025-01-14</created>

  <overview>
    –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã OneStack –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω—ã–º —Ü–∏–∫–ª–æ–º
    –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (–ö–ü) —Å –º–Ω–æ–≥–æ—Ä–æ–ª–µ–≤—ã–º workflow, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
    —á–µ—Ä–µ–∑ Telegram –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —É—á—ë—Ç–æ–º –ø–ª–∞–Ω-—Ñ–∞–∫—Ç.

    –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞: —Ä–∞—Å—á—ë—Ç –ö–ü –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
    –¶–µ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: –ø–æ–ª–Ω—ã–π –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å –æ—Ç –∑–∞—è–≤–∫–∏ –¥–æ —Å–¥–µ–ª–∫–∏ —Å —É—á–∞—Å—Ç–∏–µ–º
    8 —Ä–æ–ª–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.
  </overview>

  <technology_stack>
    <backend>
      <language>Python 3.14</language>
      <framework>FastHTML + HTMX</framework>
      <database>Supabase PostgreSQL</database>
      <existing_code>main.py (2100+ lines), calculation_engine.py</existing_code>
    </backend>
    <integrations>
      <telegram>python-telegram-bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π</telegram>
    </integrations>
  </technology_stack>

  <business_process>
    <step number="1" name="request">
      <actor>sales</actor>
      <description>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞</description>
      <actions>
        - –°–æ–∑–¥–∞–Ω–∏–µ –ö–ü (quote) —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º draft
        - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ (quote_items)
        - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –æ—Ü–µ–Ω–∫—É –∑–∞–∫—É–ø–æ–∫
      </actions>
      <next_status>pending_procurement</next_status>
    </step>

    <step number="2" name="procurement">
      <actor>procurement</actor>
      <description>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –∑–∞–∫—É–ø–∫–∞–º –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Å–≤–æ–∏–º –±—Ä–µ–Ω–¥–∞–º</description>
      <actions>
        - –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
        - –°–∫–∞—á–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π –ø–æ —Å–≤–æ–∏–º –±—Ä–µ–Ω–¥–∞–º
        - –ó–∞–ø–æ–ª–Ω—è–µ—Ç: —Ü–µ–Ω–∞, —Å—Ç—Ä–∞–Ω–∞/–≥–æ—Ä–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞, –≤–µ—Å
        - –ó–∞–ø–æ–ª–Ω—è–µ—Ç: —Å—Ä–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, –Ω–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è-–ø–ª–∞—Ç–µ–ª—å—â–∏–∫
        - –ó–∞–ø–æ–ª–Ω—è–µ—Ç: % –∞–≤–∞–Ω—Å–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
        - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º—É
      </actions>
      <trigger>–í—Å–µ –±—Ä–µ–Ω–¥—ã –≤ –ö–ü –æ—Ü–µ–Ω–µ–Ω—ã</trigger>
      <next_status>pending_logistics, pending_customs (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)</next_status>
    </step>

    <step number="3a" name="logistics">
      <actor>logistics</actor>
      <description>–õ–æ–≥–∏—Å—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏</description>
      <actions>
        - –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
        - –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º:
          * –û—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–æ —Ö–∞–±–∞
          * –û—Ç —Ö–∞–±–∞ –¥–æ —Ç–∞–º–æ–∂–Ω–∏
          * –û—Ç —Ç–∞–º–æ–∂–Ω–∏ –¥–æ –∫–ª–∏–µ–Ω—Ç–∞
        - –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–æ–∫ –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
      </actions>
      <next_status>pending_sales_review (–∫–æ–≥–¥–∞ –∏ logistics –∏ customs –≥–æ—Ç–æ–≤—ã)</next_status>
    </step>

    <step number="3b" name="customs">
      <actor>customs</actor>
      <description>–ú–µ–Ω–µ–¥–∂–µ—Ä –¢–û (–û–ª–µ–≥ –ö–Ω—è–∑–µ–≤) –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</description>
      <actions>
        - –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
        - –ó–∞–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥—ã –¢–ù –í–≠–î –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
        - –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—à–ª–∏–Ω—ã –∏ –¥–æ–ø. —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ç–∞–º–æ–∂–Ω–µ
      </actions>
      <next_status>pending_sales_review (–∫–æ–≥–¥–∞ –∏ logistics –∏ customs –≥–æ—Ç–æ–≤—ã)</next_status>
    </step>

    <step number="4" name="sales_review">
      <actor>sales</actor>
      <description>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ö–ü</description>
      <actions>
        - –í–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Å—Ä–æ–∫–∏
        - –í—ã–±–∏—Ä–∞–µ—Ç –Ω–∞—Ü–µ–Ω–∫—É
        - –í—ã–±–∏—Ä–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–æ–º (–æ—Ç—Å—Ä–æ—á–∫–∏, —Ä–∞–∑–±–∏–≤–∫–∞)
        - –í–∏–¥–∏—Ç preview –∏—Ç–æ–≥–æ–≤—ã—Ö —Ü–µ–Ω
        - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –ö–ü
      </actions>
      <next_status>pending_quote_control</next_status>
    </step>

    <step number="5" name="quote_control">
      <actor>quote_controller</actor>
      <description>–ñ–∞–Ω–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ö–ü –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–ª–∏–µ–Ω—Ç—É</description>
      <checks>
        <check name="deal_type">–¢–∏–ø —Å–¥–µ–ª–∫–∏ (–ø–æ—Å—Ç–∞–≤–∫–∞/—Ç—Ä–∞–Ω–∑–∏—Ç) - —Ä–∞–∑–Ω–∞—è –Ω–∞—Ü–µ–Ω–∫–∞</check>
        <check name="incoterms">–ë–∞–∑–∏—Å –ø–æ—Å—Ç–∞–≤–∫–∏ (—á–∞—â–µ DDP)</check>
        <check name="currency">–í–∞–ª—é—Ç–∞ –ö–ü, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</check>
        <check name="payment_terms">–£—Å–ª–æ–≤–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–æ–º</check>
        <check name="supplier_advance">–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É</check>
        <check name="purchase_prices">–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—É–ø–æ—á–Ω—ã—Ö —Ü–µ–Ω, –ù–î–°</check>
        <check name="logistics_cost">–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏ (–Ω–µ –∏–∑ –≥–æ–ª–æ–≤—ã)</check>
        <check name="min_markup">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Ü–µ–Ω–∫–∏</check>
        <check name="lpr_reward">–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –õ–ü–†–∞</check>
        <check name="forex_risk">% –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–∑–Ω–∏—Ü—ã</check>
      </checks>
      <actions>
        - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
        - –ò–õ–ò –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        - –ò–õ–ò –æ–¥–æ–±—Ä–µ–Ω–∏–µ
      </actions>
      <approval_triggers>
        - –í–∞–ª—é—Ç–∞ –ö–ü = —Ä—É–±–ª–∏
        - –£—Å–ª–æ–≤–∏—è –Ω–µ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
        - –ù–∞—Ü–µ–Ω–∫–∞ –Ω–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞
        - –ï—Å—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –õ–ü–†–∞
      </approval_triggers>
      <next_status>pending_approval –ò–õ–ò approved</next_status>
    </step>

    <step number="6" name="top_manager_approval">
      <actor>top_manager</actor>
      <description>–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º —á–µ—Ä–µ–∑ Telegram</description>
      <actions>
        - –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –¥–µ—Ç–∞–ª—è–º–∏
        - –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å" –∏–ª–∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
        - –ú–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      </actions>
      <next_status>approved –ò–õ–ò rejected</next_status>
    </step>

    <step number="7" name="client_negotiation">
      <actor>sales</actor>
      <description>–¢–æ—Ä–≥–æ–≤–ª—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º, –≤–µ—Ä—Å–∏–∏ –ö–ü</description>
      <actions>
        - –û—Ç–ø—Ä–∞–≤–∫–∞ –ö–ü –∫–ª–∏–µ–Ω—Ç—É
        - –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π (v1, v2, v3...)
        - –í—ã–±–æ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
        - –ó–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
      </actions>
      <next_status>pending_spec_control</next_status>
    </step>

    <step number="8" name="spec_control">
      <actor>spec_controller</actor>
      <description>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ</description>
      <fields>
        <field name="proposalIdn" type="String">IDN –ö–ü</field>
        <field name="itemIndSku" type="String">IDN-SKU</field>
        <field name="specificationNumber" type="String">–ù–æ–º–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</field>
        <field name="signDate" type="DateTime">–î–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è</field>
        <field name="validityPeriod" type="String">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</field>
        <field name="specificationCurrency" type="String">–í–∞–ª—é—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</field>
        <field name="exchangeRateToRuble" type="Float">–ö—É—Ä—Å –∫ —Ä—É–±–ª—é</field>
        <field name="clientPaymentTermAfterUPD" type="Int">–°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –ø–æ—Å–ª–µ –£–ü–î</field>
        <field name="clientPaymentTerms" type="String">–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞</field>
        <field name="cargoPickupCountry" type="String">–°—Ç—Ä–∞–Ω–∞ –∑–∞–±–æ—Ä–∞ –≥—Ä—É–∑–∞</field>
        <field name="readinessPeriod" type="String">–°—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</field>
        <field name="goodsShipmentCountry" type="String">–°—Ç—Ä–∞–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –∫ –æ—Ç–≥—Ä—É–∑–∫–µ</field>
        <field name="deliveryCityInRussia" type="String">–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –†–§</field>
        <field name="cargoType" type="String">–¢–∏–ø –≥—Ä—É–∑–∞</field>
        <field name="logisticsPeriod" type="String">–°—Ä–æ–∫ –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É</field>
        <field name="ourLegalEntity" type="String">–ù–∞—à–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</field>
        <field name="clientLegalEntity" type="String">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ –∫–ª–∏–µ–Ω—Ç–∞</field>
        <field name="supplierPaymentCountry" type="String">–°—Ç—Ä–∞–Ω–∞ –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫—É</field>
      </fields>
      <actions>
        - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
        - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—É
      </actions>
      <next_status>pending_signature</next_status>
    </step>

    <step number="9" name="signature">
      <actor>sales</actor>
      <description>–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</description>
      <actions>
        - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
        - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∞–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º—É
        - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (—á–µ–ª–æ–≤–µ–∫ –∏–ª–∏ AI)
        - –ü–µ—Ä–µ–≤–æ–¥ –≤ —Å—Ç–∞—Ç—É—Å "–°–¥–µ–ª–∫–∞"
      </actions>
      <next_status>deal</next_status>
    </step>

    <step number="10" name="plan_fact">
      <actor>finance</actor>
      <description>–í–µ–¥–µ–Ω–∏–µ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞ –ø–æ —Å–¥–µ–ª–∫–µ</description>
      <actions>
        - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª–æ–≤–∏–π —Å–¥–µ–ª–∫–∏
        - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
        - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
      </actions>
      <payment_types>
        - –ü–ª–∞—Ç–µ–∂–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω—à–µ–π)
        - –ü–ª–∞—Ç–µ–∂–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
        - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
        - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ —Ç–∞–º–æ–∂–Ω—é
        - –ù–∞–ª–æ–≥–∏
        - –ö–æ–º–∏—Å—Å–∏—è —Ñ–∏–Ω–∞–≥–µ–Ω—Ç–∞
        - –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –∏–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
      </payment_types>
    </step>
  </business_process>

  <roles>
    <role code="sales" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º">
      <permissions>
        - –°–æ–∑–¥–∞–Ω–∏–µ –ö–ü
        - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ö–ü
        - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –ö–ü –∏ —Å–¥–µ–ª–æ–∫
        - –í—ã–±–æ—Ä –Ω–∞—Ü–µ–Ω–∫–∏ –∏ —É—Å–ª–æ–≤–∏–π –∫–ª–∏–µ–Ω—Ç–∞
        - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∞–Ω–æ–≤ –ø–æ–¥–ø–∏—Å–µ–π
      </permissions>
    </role>

    <role code="procurement" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –∑–∞–∫—É–ø–∫–∞–º">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–ü —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –±—Ä–µ–Ω–¥–∞–º–∏
        - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
      </permissions>
    </role>

    <role code="logistics" name="–õ–æ–≥–∏—Å—Ç">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–ü –Ω–∞ —ç—Ç–∞–ø–µ –ª–æ–≥–∏—Å—Ç–∏–∫–∏
        - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ–≥–∏—Å—Ç–∏–∫–∏
      </permissions>
    </role>

    <role code="customs" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –¢–û">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–ü –Ω–∞ —ç—Ç–∞–ø–µ —Ç–∞–º–æ–∂–Ω–∏
        - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        - –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ—à–ª–∏–Ω
      </permissions>
    </role>

    <role code="quote_controller" name="–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ö–ü">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–ü –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
        - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
        - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
        - –û–¥–æ–±—Ä–µ–Ω–∏–µ –ö–ü
      </permissions>
    </role>

    <role code="spec_controller" name="–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
        - –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
        - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π
      </permissions>
    </role>

    <role code="finance" name="–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä">
      <permissions>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫
        - –í–µ–¥–µ–Ω–∏–µ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞
        - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
      </permissions>
    </role>

    <role code="top_manager" name="–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä">
      <permissions>
        - –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ö–ü –∏ —Å–¥–µ–ª–æ–∫
        - –û—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
      </permissions>
    </role>

    <role code="admin" name="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">
      <permissions>
        - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π
        - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
      </permissions>
    </role>
  </roles>

  <database_schema>
    <existing_tables>
      <table name="organizations">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="organization_members">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="customers">–ö–ª–∏–µ–Ω—Ç—ã (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="quotes">–ö–ü (—É–∂–µ –µ—Å—Ç—å, —Ä–∞—Å—à–∏—Ä—è–µ–º)</table>
      <table name="quote_items">–ü–æ–∑–∏—Ü–∏–∏ –ö–ü (—É–∂–µ –µ—Å—Ç—å, —Ä–∞—Å—à–∏—Ä—è–µ–º)</table>
      <table name="quote_versions">–í–µ—Ä—Å–∏–∏ –ö–ü (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="quote_calculation_variables">–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞—Å—á—ë—Ç–∞ (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="quote_calculation_results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞ (—É–∂–µ –µ—Å—Ç—å)</table>
      <table name="quote_calculation_summaries">–°–≤–æ–¥–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ (—É–∂–µ –µ—Å—Ç—å)</table>
    </existing_tables>

    <new_tables>
      <table name="roles">
        <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–æ–ª–µ–π</description>
        <fields>
          - id: UUID PK
          - code: String UNIQUE (sales, procurement, logistics, customs, quote_controller, spec_controller, finance, top_manager, admin)
          - name: String (—á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
          - description: String
          - created_at: DateTime
        </fields>
      </table>

      <table name="user_roles">
        <description>–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</description>
        <fields>
          - id: UUID PK
          - user_id: UUID FK ‚Üí auth.users
          - organization_id: UUID FK ‚Üí organizations
          - role_id: UUID FK ‚Üí roles
          - created_at: DateTime
          - created_by: UUID FK ‚Üí auth.users
        </fields>
        <constraints>UNIQUE(user_id, organization_id, role_id)</constraints>
      </table>

      <table name="brand_assignments">
        <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º –ø–æ –∑–∞–∫—É–ø–∫–∞–º</description>
        <fields>
          - id: UUID PK
          - organization_id: UUID FK ‚Üí organizations
          - brand: String (–Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞)
          - user_id: UUID FK ‚Üí auth.users (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –∑–∞–∫—É–ø–∫–∞–º)
          - created_at: DateTime
          - created_by: UUID FK ‚Üí auth.users
        </fields>
        <constraints>UNIQUE(organization_id, brand)</constraints>
      </table>

      <table name="workflow_transitions">
        <description>–ê—É–¥–∏—Ç-–ª–æ–≥ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤</description>
        <fields>
          - id: UUID PK
          - quote_id: UUID FK ‚Üí quotes
          - from_status: String
          - to_status: String
          - actor_id: UUID FK ‚Üí auth.users
          - actor_role: String
          - comment: Text (–ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞)
          - created_at: DateTime
        </fields>
      </table>

      <table name="approvals">
        <description>–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ</description>
        <fields>
          - id: UUID PK
          - quote_id: UUID FK ‚Üí quotes
          - requested_by: UUID FK ‚Üí auth.users
          - approver_id: UUID FK ‚Üí auth.users
          - approval_type: String (top_manager, customs, etc.)
          - reason: Text (–ø–æ—á–µ–º—É —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)
          - status: String (pending, approved, rejected)
          - decision_comment: Text
          - requested_at: DateTime
          - decided_at: DateTime
        </fields>
      </table>

      <table name="specifications">
        <description>–î–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ quote_versions)</description>
        <fields>
          - id: UUID PK
          - quote_id: UUID FK ‚Üí quotes
          - quote_version_id: UUID FK ‚Üí quote_versions
          - specification_number: String
          - proposal_idn: String
          - item_ind_sku: String
          - sign_date: Date
          - validity_period: String
          - specification_currency: String
          - exchange_rate_to_ruble: Decimal
          - client_payment_term_after_upd: Int
          - client_payment_terms: String
          - cargo_pickup_country: String
          - readiness_period: String
          - goods_shipment_country: String
          - delivery_city_russia: String
          - cargo_type: String
          - logistics_period: String
          - our_legal_entity: String
          - client_legal_entity: String
          - supplier_payment_country: String
          - signed_scan_url: String (URL —Å–∫–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
          - status: String (draft, pending_review, approved, signed)
          - created_by: UUID FK ‚Üí auth.users
          - created_at: DateTime
          - updated_at: DateTime
        </fields>
      </table>

      <table name="deals">
        <description>–°–¥–µ–ª–∫–∏ (–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)</description>
        <fields>
          - id: UUID PK
          - specification_id: UUID FK ‚Üí specifications
          - quote_id: UUID FK ‚Üí quotes
          - deal_number: String
          - signed_at: Date
          - total_amount: Decimal
          - currency: String
          - status: String (active, completed, cancelled)
          - created_at: DateTime
          - updated_at: DateTime
        </fields>
      </table>

      <table name="plan_fact_categories">
        <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–ª–∞—Ç–µ–∂–µ–π</description>
        <fields>
          - id: UUID PK
          - code: String UNIQUE (client_payment, supplier_payment, logistics, customs, tax, finance_commission, other)
          - name: String
          - is_income: Boolean (true = –¥–æ—Ö–æ–¥, false = —Ä–∞—Å—Ö–æ–¥)
          - created_at: DateTime
        </fields>
      </table>

      <table name="plan_fact_items">
        <description>–ó–∞–ø–∏—Å–∏ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞</description>
        <fields>
          - id: UUID PK
          - deal_id: UUID FK ‚Üí deals
          - category_id: UUID FK ‚Üí plan_fact_categories
          - description: String
          - planned_amount: Decimal
          - planned_currency: String
          - planned_date: Date
          - actual_amount: Decimal (null –µ—Å–ª–∏ –µ—â—ë –Ω–µ –æ–ø–ª–∞—á–µ–Ω–æ)
          - actual_currency: String
          - actual_date: Date
          - actual_exchange_rate: Decimal (–∫—É—Ä—Å –Ω–∞ –¥–∞—Ç—É –ø–ª–∞—Ç–µ–∂–∞)
          - variance_amount: Decimal (–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤ —Ä—É–±–ª—è—Ö)
          - payment_document: String (–Ω–æ–º–µ—Ä –ø–ª–∞—Ç—ë–∂–∫–∏)
          - notes: Text
          - created_by: UUID FK ‚Üí auth.users
          - created_at: DateTime
          - updated_at: DateTime
        </fields>
      </table>

      <table name="telegram_users">
        <description>–°–≤—è–∑—å Telegram —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</description>
        <fields>
          - id: UUID PK
          - user_id: UUID FK ‚Üí auth.users
          - telegram_id: BigInt UNIQUE
          - telegram_username: String
          - is_verified: Boolean
          - verification_code: String
          - created_at: DateTime
          - verified_at: DateTime
        </fields>
      </table>

      <table name="notifications">
        <description>–ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</description>
        <fields>
          - id: UUID PK
          - user_id: UUID FK ‚Üí auth.users
          - quote_id: UUID FK ‚Üí quotes (nullable)
          - deal_id: UUID FK ‚Üí deals (nullable)
          - type: String (task_assigned, approval_required, status_changed, etc.)
          - title: String
          - message: Text
          - channel: String (telegram, email, in_app)
          - status: String (pending, sent, delivered, read, failed)
          - telegram_message_id: BigInt (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π)
          - sent_at: DateTime
          - read_at: DateTime
          - created_at: DateTime
        </fields>
      </table>
    </new_tables>

    <quote_extensions>
      <description>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã quotes</description>
      <new_fields>
        - workflow_status: String (—Å–º. —Å—Ç–∞—Ç—É—Å—ã –Ω–∏–∂–µ)
        - deal_type: String (supply, transit)
        - assigned_procurement_users: UUID[] (–º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ –∑–∞–∫—É–ø–∫–∞–º)
        - assigned_logistics_user: UUID
        - assigned_customs_user: UUID
        - procurement_completed_at: DateTime
        - logistics_completed_at: DateTime
        - customs_completed_at: DateTime
        - current_version_id: UUID FK ‚Üí quote_versions (–≤—ã–±—Ä–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
      </new_fields>
    </quote_extensions>

    <quote_items_extensions>
      <description>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã quote_items</description>
      <new_fields>
        - brand: String (—É–∂–µ –µ—Å—Ç—å)
        - assigned_procurement_user: UUID (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —ç—Ç–æ–º—É –±—Ä–µ–Ω–¥—É)
        - procurement_status: String (pending, completed)
        - procurement_completed_at: DateTime
        - procurement_completed_by: UUID
        - hs_code: String (–∫–æ–¥ –¢–ù –í–≠–î)
        - customs_duty: Decimal (–ø–æ—à–ª–∏–Ω–∞)
        - customs_extra: Decimal (–¥–æ–ø. —Ä–∞—Å—Ö–æ–¥—ã —Ç–∞–º–æ–∂–Ω–∏)
      </new_fields>
    </quote_items_extensions>

    <workflow_statuses>
      <status code="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</status>
      <status code="pending_procurement">–û–∂–∏–¥–∞–µ—Ç –æ—Ü–µ–Ω–∫–∏ –∑–∞–∫—É–ø–æ–∫</status>
      <status code="pending_logistics">–û–∂–∏–¥–∞–µ—Ç –ª–æ–≥–∏—Å—Ç–∏–∫–∏</status>
      <status code="pending_customs">–û–∂–∏–¥–∞–µ—Ç —Ç–∞–º–æ–∂–Ω–∏</status>
      <status code="pending_sales_review">–û–∂–∏–¥–∞–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–¥–∞–∂</status>
      <status code="pending_quote_control">–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ö–ü</status>
      <status code="pending_approval">–û–∂–∏–¥–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</status>
      <status code="approved">–û–¥–æ–±—Ä–µ–Ω–æ</status>
      <status code="sent_to_client">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É</status>
      <status code="client_negotiation">–¢–æ—Ä–≥–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º</status>
      <status code="pending_spec_control">–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</status>
      <status code="pending_signature">–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è</status>
      <status code="deal">–°–¥–µ–ª–∫–∞</status>
      <status code="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</status>
      <status code="cancelled">–û—Ç–º–µ–Ω–µ–Ω–æ</status>
    </workflow_statuses>
  </database_schema>

  <telegram_bot>
    <description>Telegram-–±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π</description>

    <commands>
      <command name="/start">–ù–∞—á–∞–ª–æ, –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ –∫–æ–¥—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</command>
      <command name="/status">–ú–æ–∏ —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏</command>
      <command name="/help">–°–ø—Ä–∞–≤–∫–∞</command>
    </commands>

    <notification_types>
      <type code="task_assigned">
        <description>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞</description>
        <template>
          üìã –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
          –ö–ü: {quote_idn}
          –ö–ª–∏–µ–Ω—Ç: {customer_name}
          –î–µ–π—Å—Ç–≤–∏–µ: {action_required}
          [–û—Ç–∫—Ä—ã—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ]
        </template>
      </type>

      <type code="approval_required">
        <description>–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ (–¥–ª—è —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞)</description>
        <template>
          üîî –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
          –ö–ü: {quote_idn}
          –ö–ª–∏–µ–Ω—Ç: {customer_name}
          –°—É–º–º–∞: {total_amount}
          –ü—Ä–∏—á–∏–Ω–∞: {approval_reason}

          –î–µ—Ç–∞–ª–∏:
          - –ù–∞—Ü–µ–Ω–∫–∞: {markup}%
          - –£—Å–ª–æ–≤–∏—è: {payment_terms}

          [‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
        </template>
        <inline_buttons>
          - approve: –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å
          - reject: –û—Ç–∫–ª–æ–Ω–∏—Ç—å
          - details: –ü–æ–¥—Ä–æ–±–Ω–µ–µ
        </inline_buttons>
      </type>

      <type code="status_changed">
        <description>–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è</description>
        <template>
          üìù –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω—ë–Ω
          –ö–ü: {quote_idn}
          –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å: {new_status}
          –ò–∑–º–µ–Ω–∏–ª: {actor_name}
        </template>
      </type>

      <type code="returned_for_revision">
        <description>–í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É</description>
        <template>
          ‚ö†Ô∏è –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
          –ö–ü: {quote_idn}
          –ü—Ä–∏—á–∏–Ω–∞: {comment}
          –í–µ—Ä–Ω—É–ª: {actor_name}
        </template>
      </type>
    </notification_types>

    <callback_handlers>
      <handler prefix="approve_">–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</handler>
      <handler prefix="reject_">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è</handler>
      <handler prefix="details_">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ö–ü</handler>
    </callback_handlers>
  </telegram_bot>

  <ui_screens>
    <screen name="dashboard" path="/dashboard">
      <description>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ –ø–æ —Ä–æ–ª—è–º</description>
      <components>
        - –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–º–æ–∏ –∑–∞–¥–∞—á–∏, –æ–∂–∏–¥–∞—é—Ç –º–µ–Ω—è, –∑–∞–≤–µ—Ä—à–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è)
        - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —Ä–æ–ª–∏
        - –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
      </components>
    </screen>

    <screen name="quote_workflow" path="/quotes/{id}/workflow">
      <description>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–ü —Å workflow</description>
      <components>
        - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä workflow (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —ç—Ç–∞–ø–æ–≤)
        - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π
        - –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–æ–ª–∏)
        - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–∞—É–¥–∏—Ç-–ª–æ–≥)
        - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–ª—å—à–µ, –≤–µ—Ä–Ω—É—Ç—å, —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å)
      </components>
    </screen>

    <screen name="procurement_view" path="/procurement">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ –∑–∞–∫—É–ø–∫–∞–º</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –ö–ü —Å –º–æ–∏–º–∏ –±—Ä–µ–Ω–¥–∞–º–∏
        - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
        - –ú–∞—Å—Å–æ–≤–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
        - –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω
      </components>
    </screen>

    <screen name="logistics_view" path="/logistics">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ –ª–æ–≥–∏—Å—Ç–∞</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –ö–ü –Ω–∞ —ç—Ç–∞–ø–µ –ª–æ–≥–∏—Å—Ç–∏–∫–∏
        - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º
        - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ª–æ–≥–∏—Å—Ç–∏–∫–∏
      </components>
    </screen>

    <screen name="customs_view" path="/customs">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¢–û</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –ö–ü –Ω–∞ —ç—Ç–∞–ø–µ —Ç–∞–º–æ–∂–Ω–∏
        - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –∫–æ–¥–æ–≤ –¢–ù –í–≠–î
        - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–¥–æ–≤
        - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ—à–ª–∏–Ω
      </components>
    </screen>

    <screen name="quote_control_view" path="/quote-control">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ö–ü (–ñ–∞–Ω–Ω–∞)</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –ö–ü –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
        - –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤—Å–µ –ø—É–Ω–∫—Ç—ã)
        - –§–æ—Ä–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
        - –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
        - –ö–Ω–æ–ø–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è
      </components>
    </screen>

    <screen name="spec_control_view" path="/spec-control">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π</description>
      <components>
        - –°–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
        - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - Preview PDF
        - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∞
        - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫–∞–Ω–∞ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º
      </components>
    </screen>

    <screen name="finance_view" path="/finance">
      <description>–†–∞–±–æ—á–∞—è –∑–æ–Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
        - –ü–ª–∞–Ω-—Ñ–∞–∫—Ç —Ç–∞–±–ª–∏—Ü–∞ –ø–æ —Å–¥–µ–ª–∫–µ
        - –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞
        - –û—Ç—á—ë—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
        - –°–≤–æ–¥–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥—É
      </components>
    </screen>

    <screen name="admin_users" path="/admin/users">
      <description>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π
        - –ü—Ä–∏–≤—è–∑–∫–∞ Telegram
      </components>
    </screen>

    <screen name="admin_brands" path="/admin/brands">
      <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤</description>
      <components>
        - –°–ø–∏—Å–æ–∫ –±—Ä–µ–Ω–¥–æ–≤
        - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ –∑–∞–∫—É–ø–∫–∞–º
        - –ò–º–ø–æ—Ä—Ç –±—Ä–µ–Ω–¥–æ–≤ –∏–∑ –ö–ü
      </components>
    </screen>

    <screen name="settings_telegram" path="/settings/telegram">
      <description>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</description>
      <components>
        - –ö–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
        - –°—Ç–∞—Ç—É—Å –ø—Ä–∏–≤—è–∑–∫–∏
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      </components>
    </screen>
  </ui_screens>

  <api_endpoints>
    <category name="workflow">
      <endpoint method="POST" path="/api/quotes/{id}/submit-to-procurement">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –æ—Ü–µ–Ω–∫—É –∑–∞–∫—É–ø–æ–∫</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/complete-procurement">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ü–µ–Ω–∫—É –∑–∞–∫—É–ø–æ–∫</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/complete-logistics">–ó–∞–≤–µ—Ä—à–∏—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/complete-customs">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–º–æ–∂–Ω—é</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/submit-to-control">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ö–ü</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/return-for-revision">–í–µ—Ä–Ω—É—Ç—å –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/request-approval">–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/approve">–û–¥–æ–±—Ä–∏—Ç—å</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/reject">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/send-to-client">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É</endpoint>
      <endpoint method="POST" path="/api/quotes/{id}/request-specification">–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é</endpoint>
    </category>

    <category name="specifications">
      <endpoint method="GET" path="/api/specifications">–°–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π</endpoint>
      <endpoint method="GET" path="/api/specifications/{id}">–î–µ—Ç–∞–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</endpoint>
      <endpoint method="PUT" path="/api/specifications/{id}">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</endpoint>
      <endpoint method="POST" path="/api/specifications/{id}/generate-pdf">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF</endpoint>
      <endpoint method="POST" path="/api/specifications/{id}/upload-signed">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–∫–∞–Ω</endpoint>
      <endpoint method="POST" path="/api/specifications/{id}/confirm-signature">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–¥–ø–∏—Å—å</endpoint>
    </category>

    <category name="deals">
      <endpoint method="GET" path="/api/deals">–°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫</endpoint>
      <endpoint method="GET" path="/api/deals/{id}">–î–µ—Ç–∞–ª–∏ —Å–¥–µ–ª–∫–∏</endpoint>
      <endpoint method="GET" path="/api/deals/{id}/plan-fact">–ü–ª–∞–Ω-—Ñ–∞–∫—Ç –ø–æ —Å–¥–µ–ª–∫–µ</endpoint>
    </category>

    <category name="plan_fact">
      <endpoint method="GET" path="/api/plan-fact">–í—Å–µ –∑–∞–ø–∏—Å–∏ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞</endpoint>
      <endpoint method="POST" path="/api/plan-fact">–°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂</endpoint>
      <endpoint method="PUT" path="/api/plan-fact/{id}">–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</endpoint>
      <endpoint method="POST" path="/api/plan-fact/{id}/register-actual">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–∫—Ç</endpoint>
    </category>

    <category name="admin">
      <endpoint method="GET" path="/api/admin/users">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</endpoint>
      <endpoint method="POST" path="/api/admin/users/{id}/roles">–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å</endpoint>
      <endpoint method="DELETE" path="/api/admin/users/{id}/roles/{role_id}">–£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å</endpoint>
      <endpoint method="GET" path="/api/admin/brands">–°–ø–∏—Å–æ–∫ –±—Ä–µ–Ω–¥–æ–≤</endpoint>
      <endpoint method="POST" path="/api/admin/brands">–°–æ–∑–¥–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞</endpoint>
      <endpoint method="PUT" path="/api/admin/brands/{id}">–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</endpoint>
      <endpoint method="DELETE" path="/api/admin/brands/{id}">–£–¥–∞–ª–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</endpoint>
    </category>

    <category name="telegram">
      <endpoint method="POST" path="/api/telegram/webhook">Webhook –¥–ª—è Telegram-–±–æ—Ç–∞</endpoint>
      <endpoint method="GET" path="/api/telegram/verification-code">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</endpoint>
      <endpoint method="POST" path="/api/telegram/verify">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É</endpoint>
    </category>

    <category name="notifications">
      <endpoint method="GET" path="/api/notifications">–ú–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</endpoint>
      <endpoint method="POST" path="/api/notifications/{id}/read">–û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º</endpoint>
    </category>
  </api_endpoints>

  <implementation_phases>
    <phase number="1" name="Database Schema">
      <description>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö</description>
      <tasks>
        - –°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
        - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ quotes –∏ quote_items
        - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (roles, plan_fact_categories)
        - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
      </tasks>
    </phase>

    <phase number="2" name="Role System">
      <description>–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</description>
      <tasks>
        - –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏
        - Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
        - UI –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π (–∞–¥–º–∏–Ω)
        - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–æ–ª—è–º
      </tasks>
    </phase>

    <phase number="3" name="Workflow Engine">
      <description>–î–≤–∏–∂–æ–∫ workflow</description>
      <tasks>
        - –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤
        - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–∫—Ç–æ –º–æ–∂–µ—Ç –∫—É–¥–∞)
        - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (logistics + customs ‚Üí sales_review)
        - –ê—É–¥–∏—Ç-–ª–æ–≥ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
      </tasks>
    </phase>

    <phase number="4" name="Role-Specific Views">
      <description>–†–∞–±–æ—á–∏–µ –∑–æ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏</description>
      <tasks>
        - Procurement view (–∑–∞–∫—É–ø–∫–∏)
        - Logistics view (–ª–æ–≥–∏—Å—Ç–∏–∫–∞)
        - Customs view (—Ç–∞–º–æ–∂–Ω—è)
        - Quote control view (–ñ–∞–Ω–Ω–∞)
        - Spec control view (—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
        - Finance view (–ø–ª–∞–Ω-—Ñ–∞–∫—Ç)
      </tasks>
    </phase>

    <phase number="5" name="Telegram Bot">
      <description>Telegram-–±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</description>
      <tasks>
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ (BotFather)
        - Webhook endpoint
        - –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
        - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö
        - Inline-–∫–Ω–æ–ø–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
      </tasks>
    </phase>

    <phase number="6" name="Specifications">
      <description>–°–∏—Å—Ç–µ–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π</description>
      <tasks>
        - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
        - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∫–∞–Ω–æ–≤
        - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ AI)
      </tasks>
    </phase>

    <phase number="7" name="Plan-Fact">
      <description>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –ø–ª–∞–Ω-—Ñ–∞–∫—Ç</description>
      <tasks>
        - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∏–∑ —Å–¥–µ–ª–∫–∏
        - –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
        - –†–∞—Å—á—ë—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
        - –û—Ç—á—ë—Ç—ã
      </tasks>
    </phase>

    <phase number="8" name="Polish">
      <description>–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</description>
      <tasks>
        - E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflow
        - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
        - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
      </tasks>
    </phase>
  </implementation_phases>

  <feature_count>~85 features</feature_count>

  <success_criteria>
    <functionality>
      - –ü–æ–ª–Ω—ã–π workflow –æ—Ç –∑–∞—è–≤–∫–∏ –¥–æ —Å–¥–µ–ª–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
      - –í—Å–µ —Ä–æ–ª–∏ –∏–º–µ—é—Ç —Å–≤–æ–∏ —Ä–∞–±–æ—á–∏–µ –∑–æ–Ω—ã
      - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram
      - –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ Telegram
      - –ü–ª–∞–Ω-—Ñ–∞–∫—Ç –≤–µ–¥—ë—Ç—Å—è –ø–æ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–µ
      - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
    </functionality>
    <technical>
      - –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ
      - RLS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
      - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ < 2 —Å–µ–∫
      - –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
    </technical>
  </success_criteria>
</project_specification>
