<?xml version="1.0" encoding="UTF-8"?>
<project_specification>
  <project_name>Kvota OneStack - Quote Workflow System</project_name>
  <version>3.0</version>
  <created>2025-01-15</created>

  <overview>
    –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ (–ö–ü) —Å –º–Ω–æ–≥–æ—Ä–æ–ª–µ–≤—ã–º
    workflow, —Ü–µ–ø–æ—á–∫–æ–π –ø–æ—Å—Ç–∞–≤–æ–∫ –∏–∑ 4 —Ç–∏–ø–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ Telegram
    –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —É—á—ë—Ç–æ–º –ø–ª–∞–Ω-—Ñ–∞–∫—Ç.

    –¶–µ–ø–æ—á–∫–∞ –ø–æ—Å—Ç–∞–≤–æ–∫: –ü–û–°–¢–ê–í–©–ò–ö ‚Üí –ö–û–ú–ü–ê–ù–ò–Ø-–ó–ê–ö–£–ü–©–ò–ö ‚Üí –ö–û–ú–ü–ê–ù–ò–Ø-–ü–†–û–î–ê–í–ï–¶ ‚Üí –ö–õ–ò–ï–ù–¢

    - –ü–æ—Å—Ç–∞–≤—â–∏–∫ (Supplier): –í–Ω–µ—à–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è, —É –∫–æ—Ç–æ—Ä–æ–π –ø–æ–∫—É–ø–∞–µ–º —Ç–æ–≤–∞—Ä
    - –ö–æ–º–ø–∞–Ω–∏—è-–∑–∞–∫—É–ø—â–∏–∫ (Buyer Company): –ù–∞—à–µ —é—Ä–ª–∏—Ü–æ –¥–ª—è –∑–∞–∫—É–ø–æ–∫
    - –ö–æ–º–ø–∞–Ω–∏—è-–ø—Ä–æ–¥–∞–≤–µ—Ü (Seller Company): –ù–∞—à–µ —é—Ä–ª–∏—Ü–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂
    - –ö–ª–∏–µ–Ω—Ç (Customer): –í–Ω–µ—à–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–¥–∞—ë–º
  </overview>

  <technology_stack>
    <backend>
      <language>Python 3.14</language>
      <framework>FastHTML + HTMX</framework>
      <database>Supabase PostgreSQL</database>
    </backend>
    <integrations>
      <telegram>python-telegram-bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π</telegram>
    </integrations>
  </technology_stack>

  <!-- ============================================ -->
  <!-- SUPPLY CHAIN: 4 COMPANY TYPES -->
  <!-- ============================================ -->

  <supply_chain>
    <entity type="supplier" name="–ü–æ—Å—Ç–∞–≤—â–∏–∫">
      <description>–í–Ω–µ—à–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è-–ø–æ—Å—Ç–∞–≤—â–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤</description>
      <level>item</level>
      <note>–ö–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –ö–ü –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–µ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</note>
      <fields>
        - id, organization_id
        - name (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏)
        - supplier_code (3 –±—É–∫–≤—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä CMT, RAR)
        - country, city
        - inn, kpp (–µ—Å–ª–∏ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π)
        - contact_person, contact_email, contact_phone
        - payment_terms (—É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        - is_active, created_at, updated_at
      </fields>
      <relations>
        - brand_supplier_assignments: —Å–≤—è–∑—å —Å –±—Ä–µ–Ω–¥–∞–º–∏
        - bank_accounts: –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
      </relations>
    </entity>

    <entity type="buyer_company" name="–ö–æ–º–ø–∞–Ω–∏—è-–∑–∞–∫—É–ø—â–∏–∫">
      <description>–ù–∞—à–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ –¥–ª—è –∑–∞–∫—É–ø–æ–∫</description>
      <level>item</level>
      <note>–ö–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–∫—É–ø–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –Ω–∞—à–∏ —é—Ä–ª–∏—Ü–∞</note>
      <fields>
        - id, organization_id
        - name (–Ω–∞–∑–≤–∞–Ω–∏–µ —é—Ä–ª–∏—Ü–∞)
        - company_code (3 –±—É–∫–≤—ã)
        - country
        - inn, kpp, ogrn (—Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã)
        - registration_address
        - general_director_name, general_director_position
        - is_active, created_at, updated_at
      </fields>
      <relations>
        - bank_accounts: –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
      </relations>
    </entity>

    <entity type="seller_company" name="–ö–æ–º–ø–∞–Ω–∏—è-–ø—Ä–æ–¥–∞–≤–µ—Ü">
      <description>–ù–∞—à–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂ –∫–ª–∏–µ–Ω—Ç—É</description>
      <level>quote</level>
      <note>–û–¥–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è-–ø—Ä–æ–¥–∞–≤–µ—Ü –Ω–∞ –≤–µ—Å—å –ö–ü</note>
      <fields>
        - id, organization_id
        - name (–Ω–∞–∑–≤–∞–Ω–∏–µ —é—Ä–ª–∏—Ü–∞)
        - supplier_code (3 –±—É–∫–≤—ã: MBR, RAR, GES, TEX, CMT)
        - country
        - inn, kpp, ogrn
        - registration_address
        - general_director_name, general_director_position
        - is_active, created_at, updated_at
      </fields>
      <relations>
        - bank_accounts: –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
      </relations>
      <examples>
        - –ú–ê–°–¢–ï–† –ë–≠–†–ò–ù–ì –û–û–û (MBR) - –†–æ—Å—Å–∏—è
        - –†–∞–¥–†–µ—Å—É—Ä—Å –û–û–û (RAR) - –†–æ—Å—Å–∏—è
        - –¶–ú–¢–û1 –û–û–û (CMT) - –†–æ—Å—Å–∏—è
        - GESTUS DI≈û Tƒ∞CARET (GES) - –¢—É—Ä—Ü–∏—è
        - TEXCEL OTOMOTƒ∞V (TEX) - –¢—É—Ä—Ü–∏—è
      </examples>
    </entity>

    <entity type="customer" name="–ö–ª–∏–µ–Ω—Ç">
      <description>–í–Ω–µ—à–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è-–ø–æ–∫—É–ø–∞—Ç–µ–ª—å</description>
      <level>quote</level>
      <fields>
        - id, organization_id
        - name (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏)
        - inn, kpp, ogrn
        - legal_address, actual_address
        - general_director_name, general_director_position (–õ–ü–†-–ø–æ–¥–ø–∏—Å–∞–Ω—Ç)
        - warehouse_addresses (JSONB –º–∞—Å—Å–∏–≤ —Å–∫–ª–∞–¥–æ–≤)
        - is_active, created_at, updated_at
      </fields>
      <relations>
        - customer_contacts: –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –ª–∏—Ü–∞ (–õ–ü–†)
        - customer_contracts: –¥–æ–≥–æ–≤–æ—Ä—ã –ø–æ—Å—Ç–∞–≤–∫–∏
        - bank_accounts: –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
      </relations>
    </entity>
  </supply_chain>

  <!-- ============================================ -->
  <!-- IDN SYSTEM: IDENTIFICATION NUMBERS -->
  <!-- ============================================ -->

  <idn_system>
    <description>–°–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –¥–ª—è –ö–ü –∏ –ø–æ–∑–∏—Ü–∏–π</description>

    <quote_idn format="SUPPLIER-INN-YEAR-SEQ">
      <example>CMT-1234567890-2025-1</example>
      <parts>
        - SUPPLIER: 3-–±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ –∫–æ–º–ø–∞–Ω–∏–∏-–ø—Ä–æ–¥–∞–≤—Ü–∞
        - INN: –ò–ù–ù –∫–ª–∏–µ–Ω—Ç–∞ (10 —Ü–∏—Ñ—Ä)
        - YEAR: –ì–æ–¥ (4 —Ü–∏—Ñ—Ä—ã)
        - SEQ: –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≤ –≥–æ–¥—É
      </parts>
      <storage>organizations.idn_counters JSONB {year: {customer_inn: seq}}</storage>
    </quote_idn>

    <item_idn format="QUOTE_IDN-POSITION">
      <example>CMT-1234567890-2025-1-001</example>
      <note>–ü–æ–∑–∏—Ü–∏—è –≤ —Ä–∞–º–∫–∞—Ö –ö–ü (001, 002, ...)</note>
    </item_idn>
  </idn_system>

  <!-- ============================================ -->
  <!-- DATABASE SCHEMA -->
  <!-- ============================================ -->

  <database_schema>
    <!-- COMPANY ENTITIES -->

    <table name="suppliers">
      <description>–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (–≤–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="name" type="VARCHAR(255)" required="true"/>
        <column name="supplier_code" type="VARCHAR(3)" required="true" unique="per_org"/>
        <column name="country" type="VARCHAR(100)"/>
        <column name="city" type="VARCHAR(100)"/>
        <column name="inn" type="VARCHAR(12)"/>
        <column name="kpp" type="VARCHAR(9)"/>
        <column name="contact_person" type="VARCHAR(255)"/>
        <column name="contact_email" type="VARCHAR(255)"/>
        <column name="contact_phone" type="VARCHAR(50)"/>
        <column name="default_payment_terms" type="TEXT"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
      <constraints>
        <unique>organization_id, supplier_code</unique>
        <check>supplier_code ~ '^[A-Z]{3}$'</check>
      </constraints>
    </table>

    <table name="buyer_companies">
      <description>–ö–æ–º–ø–∞–Ω–∏–∏-–∑–∞–∫—É–ø—â–∏–∫–∏ (–Ω–∞—à–∏ —é—Ä–ª–∏—Ü–∞ –¥–ª—è –∑–∞–∫—É–ø–æ–∫)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="name" type="VARCHAR(255)" required="true"/>
        <column name="company_code" type="VARCHAR(3)" required="true" unique="per_org"/>
        <column name="country" type="VARCHAR(100)"/>
        <column name="inn" type="VARCHAR(12)"/>
        <column name="kpp" type="VARCHAR(9)"/>
        <column name="ogrn" type="VARCHAR(15)"/>
        <column name="registration_address" type="TEXT"/>
        <column name="general_director_name" type="VARCHAR(255)"/>
        <column name="general_director_position" type="VARCHAR(100)" default="–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="seller_companies">
      <description>–ö–æ–º–ø–∞–Ω–∏–∏-–ø—Ä–æ–¥–∞–≤—Ü—ã (–Ω–∞—à–∏ —é—Ä–ª–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∂)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="name" type="VARCHAR(255)" required="true"/>
        <column name="supplier_code" type="VARCHAR(3)" required="true" unique="per_org"/>
        <column name="country" type="VARCHAR(100)"/>
        <column name="inn" type="VARCHAR(12)"/>
        <column name="kpp" type="VARCHAR(9)"/>
        <column name="ogrn" type="VARCHAR(15)"/>
        <column name="registration_address" type="TEXT"/>
        <column name="general_director_name" type="VARCHAR(255)"/>
        <column name="general_director_position" type="VARCHAR(100)" default="–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="customers">
      <description>–ö–ª–∏–µ–Ω—Ç—ã (–≤–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏-–ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="name" type="VARCHAR(255)" required="true"/>
        <column name="inn" type="VARCHAR(12)"/>
        <column name="kpp" type="VARCHAR(9)"/>
        <column name="ogrn" type="VARCHAR(15)"/>
        <column name="legal_address" type="TEXT"/>
        <column name="actual_address" type="TEXT"/>
        <column name="general_director_name" type="VARCHAR(255)"/>
        <column name="general_director_position" type="VARCHAR(100)" default="–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä"/>
        <column name="warehouse_addresses" type="JSONB" default="[]"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="customer_contacts">
      <description>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–õ–ü–†)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="customer_id" type="UUID" fk="customers.id"/>
        <column name="name" type="VARCHAR(255)" required="true"/>
        <column name="position" type="VARCHAR(255)"/>
        <column name="email" type="VARCHAR(255)"/>
        <column name="phone" type="VARCHAR(50)"/>
        <column name="is_signatory" type="BOOLEAN" default="false"/>
        <column name="is_primary" type="BOOLEAN" default="false"/>
        <column name="notes" type="TEXT"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="customer_contracts">
      <description>–î–æ–≥–æ–≤–æ—Ä—ã –ø–æ—Å—Ç–∞–≤–∫–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="customer_id" type="UUID" fk="customers.id"/>
        <column name="contract_number" type="TEXT" required="true"/>
        <column name="contract_date" type="DATE" required="true"/>
        <column name="status" type="TEXT" default="active"/>
        <column name="next_specification_number" type="INTEGER" default="1"/>
        <column name="notes" type="TEXT"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
      </columns>
      <constraints>
        <check>status IN ('active', 'expired', 'terminated')</check>
        <unique>organization_id, contract_number</unique>
      </constraints>
    </table>

    <table name="bank_accounts">
      <description>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="entity_type" type="VARCHAR(50)" required="true"/>
        <column name="entity_id" type="UUID" required="true"/>
        <column name="bank_name" type="VARCHAR(255)" required="true"/>
        <column name="account_number" type="VARCHAR(50)" required="true"/>
        <column name="bik" type="VARCHAR(9)"/>
        <column name="correspondent_account" type="VARCHAR(20)"/>
        <column name="swift" type="VARCHAR(11)"/>
        <column name="iban" type="VARCHAR(34)"/>
        <column name="currency" type="VARCHAR(3)" default="RUB"/>
        <column name="is_default" type="BOOLEAN" default="false"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
      <constraints>
        <check>entity_type IN ('supplier', 'buyer_company', 'seller_company', 'customer')</check>
      </constraints>
    </table>

    <!-- LOCATIONS DIRECTORY -->

    <table name="locations">
      <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ª–æ–∫–∞—Ü–∏–π (–≥–æ—Ä–æ–¥–∞/—Å—Ç—Ä–∞–Ω—ã) –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="country" type="VARCHAR(100)" required="true"/>
        <column name="city" type="VARCHAR(100)"/>
        <column name="code" type="VARCHAR(10)"/>
        <column name="is_hub" type="BOOLEAN" default="false"/>
        <column name="is_active" type="BOOLEAN" default="true"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
      <note>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è dropdown —Å –ø–æ–∏—Å–∫–æ–º –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ª–æ–∫–∞—Ü–∏–∏ –∑–∞–±–æ—Ä–∞/–¥–æ—Å—Ç–∞–≤–∫–∏</note>
    </table>

    <!-- BRAND AND ROUTE ASSIGNMENTS -->

    <table name="brand_supplier_assignments">
      <description>–°–≤—è–∑—å –±—Ä–µ–Ω–¥–æ–≤ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="brand" type="VARCHAR(255)" required="true"/>
        <column name="supplier_id" type="UUID" fk="suppliers.id"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="brand_procurement_assignments">
      <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º –ø–æ –∑–∞–∫—É–ø–∫–∞–º</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="brand" type="VARCHAR(255)" required="true"/>
        <column name="user_id" type="UUID" fk="auth.users.id"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
      </columns>
      <constraints>
        <unique>organization_id, brand</unique>
      </constraints>
    </table>

    <table name="route_logistics_assignments">
      <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ª–æ–≥–∏—Å—Ç–∞–º</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="route_pattern" type="VARCHAR(255)" required="true"/>
        <column name="user_id" type="UUID" fk="auth.users.id"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
      </columns>
      <note>route_pattern: "–ö–∏—Ç–∞–π-*", "–¢—É—Ä—Ü–∏—è-–ú–æ—Å–∫–≤–∞", etc.</note>
    </table>

    <!-- QUOTES EXTENSION -->

    <table name="quotes" action="extend">
      <description>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ö–ü</description>
      <new_columns>
        <column name="idn" type="VARCHAR(100)"/>
        <column name="seller_company_id" type="UUID" fk="seller_companies.id"/>
        <column name="workflow_status" type="VARCHAR(50)" default="draft"/>
        <column name="deal_type" type="VARCHAR(20)"/>
        <column name="assigned_logistics_user_id" type="UUID" fk="auth.users.id"/>
        <column name="assigned_customs_user_id" type="UUID" fk="auth.users.id"/>
        <column name="procurement_completed_at" type="TIMESTAMPTZ"/>
        <column name="logistics_completed_at" type="TIMESTAMPTZ"/>
        <column name="customs_completed_at" type="TIMESTAMPTZ"/>
        <column name="current_version" type="INTEGER" default="1"/>
        <column name="selected_version_id" type="UUID" fk="quote_versions.id"/>
      </new_columns>
      <constraints>
        <check>deal_type IN ('supply', 'transit')</check>
      </constraints>
    </table>

    <!-- QUOTE ITEMS EXTENSION -->

    <table name="quote_items" action="extend">
      <description>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–∑–∏—Ü–∏–π –ö–ü</description>
      <new_columns>
        <!-- IDN -->
        <column name="item_idn" type="VARCHAR(120)"/>

        <!-- Supply chain references (item level) -->
        <column name="supplier_id" type="UUID" fk="suppliers.id"/>
        <column name="buyer_company_id" type="UUID" fk="buyer_companies.id"/>

        <!-- Procurement fields -->
        <column name="assigned_procurement_user_id" type="UUID" fk="auth.users.id"/>
        <column name="procurement_status" type="VARCHAR(20)" default="pending"/>
        <column name="procurement_completed_at" type="TIMESTAMPTZ"/>
        <column name="procurement_completed_by" type="UUID" fk="auth.users.id"/>
        <column name="pickup_location_id" type="UUID" fk="locations.id"/>
        <column name="supplier_payment_terms" type="TEXT"/>
        <column name="supplier_advance_percent" type="DECIMAL(5,2)"/>
        <column name="production_time_days" type="INTEGER"/>
        <column name="weight_kg" type="DECIMAL(10,3)"/>
        <column name="volume_m3" type="DECIMAL(10,4)"/>

        <!-- Customs fields -->
        <column name="hs_code" type="VARCHAR(20)"/>
        <column name="customs_duty_percent" type="DECIMAL(5,2)"/>
        <column name="customs_extra_cost" type="DECIMAL(15,2)"/>

        <!-- Logistics fields (multi-segment) -->
        <column name="logistics_supplier_to_hub" type="DECIMAL(15,2)"/>
        <column name="logistics_hub_to_customs" type="DECIMAL(15,2)"/>
        <column name="logistics_customs_to_customer" type="DECIMAL(15,2)"/>
        <column name="logistics_total_days" type="INTEGER"/>
      </new_columns>
    </table>

    <!-- SUPPLIER INVOICES REGISTRY -->

    <table name="supplier_invoices">
      <description>–†–µ–µ—Å—Ç—Ä –∏–Ω–≤–æ–π—Å–æ–≤ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="supplier_id" type="UUID" fk="suppliers.id"/>
        <column name="invoice_number" type="VARCHAR(100)" required="true"/>
        <column name="invoice_date" type="DATE" required="true"/>
        <column name="due_date" type="DATE"/>
        <column name="total_amount" type="DECIMAL(15,2)" required="true"/>
        <column name="currency" type="VARCHAR(3)" default="USD"/>
        <column name="status" type="VARCHAR(20)" default="pending"/>
        <column name="notes" type="TEXT"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
      </columns>
      <constraints>
        <check>status IN ('pending', 'partially_paid', 'paid', 'overdue', 'cancelled')</check>
        <unique>organization_id, supplier_id, invoice_number</unique>
      </constraints>
    </table>

    <table name="supplier_invoice_items">
      <description>–ü–æ–∑–∏—Ü–∏–∏ –∏–Ω–≤–æ–π—Å–∞ (—Å–≤—è–∑—å —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –ö–ü)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="invoice_id" type="UUID" fk="supplier_invoices.id"/>
        <column name="quote_item_id" type="UUID" fk="quote_items.id"/>
        <column name="quantity" type="DECIMAL(10,2)"/>
        <column name="unit_price" type="DECIMAL(15,4)"/>
        <column name="total_price" type="DECIMAL(15,2)"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="supplier_invoice_payments">
      <description>–ü–ª–∞—Ç–µ–∂–∏ –ø–æ –∏–Ω–≤–æ–π—Å–∞–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="invoice_id" type="UUID" fk="supplier_invoices.id"/>
        <column name="payment_date" type="DATE" required="true"/>
        <column name="amount" type="DECIMAL(15,2)" required="true"/>
        <column name="currency" type="VARCHAR(3)" default="USD"/>
        <column name="exchange_rate" type="DECIMAL(10,4)"/>
        <column name="payment_type" type="VARCHAR(20)" default="advance"/>
        <column name="buyer_company_id" type="UUID" fk="buyer_companies.id"/>
        <column name="payment_document" type="VARCHAR(100)"/>
        <column name="notes" type="TEXT"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
      </columns>
      <constraints>
        <check>payment_type IN ('advance', 'partial', 'final', 'refund')</check>
      </constraints>
    </table>

    <!-- WORKFLOW -->

    <table name="workflow_transitions">
      <description>–ê—É–¥–∏—Ç-–ª–æ–≥ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="quote_id" type="UUID" fk="quotes.id"/>
        <column name="from_status" type="VARCHAR(50)"/>
        <column name="to_status" type="VARCHAR(50)"/>
        <column name="actor_id" type="UUID" fk="auth.users.id"/>
        <column name="actor_role" type="VARCHAR(50)"/>
        <column name="comment" type="TEXT"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="approvals">
      <description>–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="quote_id" type="UUID" fk="quotes.id"/>
        <column name="requested_by" type="UUID" fk="auth.users.id"/>
        <column name="approver_id" type="UUID" fk="auth.users.id"/>
        <column name="approval_type" type="VARCHAR(50)"/>
        <column name="reason" type="TEXT"/>
        <column name="status" type="VARCHAR(20)" default="pending"/>
        <column name="decision_comment" type="TEXT"/>
        <column name="modifications" type="JSONB"/>
        <column name="requested_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="decided_at" type="TIMESTAMPTZ"/>
      </columns>
      <note>modifications: JSON —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, –≤–Ω–µ—Å—ë–Ω–Ω—ã–º–∏ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏</note>
    </table>

    <!-- SPECIFICATIONS -->

    <table name="specifications">
      <description>–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—ç–∫—Å–ø–æ—Ä—Ç –ö–ü)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="quote_id" type="UUID" fk="quotes.id"/>
        <column name="quote_version_id" type="UUID" fk="quote_versions.id"/>
        <column name="contract_id" type="UUID" fk="customer_contracts.id"/>
        <column name="specification_number" type="INTEGER"/>
        <column name="specification_date" type="DATE" default="CURRENT_DATE"/>
        <column name="proposal_idn" type="VARCHAR(100)"/>
        <column name="sign_date" type="DATE"/>
        <column name="validity_period" type="VARCHAR(50)"/>
        <column name="specification_currency" type="VARCHAR(3)"/>
        <column name="exchange_rate_to_ruble" type="DECIMAL(10,4)"/>
        <column name="client_payment_term_after_upd" type="INTEGER"/>
        <column name="client_payment_terms" type="TEXT"/>
        <column name="delivery_city_russia" type="VARCHAR(100)"/>
        <column name="our_legal_entity" type="VARCHAR(255)"/>
        <column name="client_legal_entity" type="VARCHAR(255)"/>
        <column name="signed_scan_url" type="TEXT"/>
        <column name="status" type="VARCHAR(20)" default="draft"/>
        <column name="export_data" type="JSONB" default="{}"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
      <constraints>
        <check>status IN ('draft', 'pending_review', 'approved', 'signed', 'cancelled')</check>
      </constraints>
    </table>

    <!-- DEALS AND PLAN-FACT -->

    <table name="deals">
      <description>–°–¥–µ–ª–∫–∏ (–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="organization_id" type="UUID" fk="organizations.id"/>
        <column name="specification_id" type="UUID" fk="specifications.id"/>
        <column name="quote_id" type="UUID" fk="quotes.id"/>
        <column name="deal_number" type="VARCHAR(100)"/>
        <column name="signed_at" type="DATE"/>
        <column name="total_amount" type="DECIMAL(15,2)"/>
        <column name="currency" type="VARCHAR(3)"/>
        <column name="status" type="VARCHAR(20)" default="active"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <table name="plan_fact_categories">
      <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–ª–∞—Ç–µ–∂–µ–π</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="code" type="VARCHAR(50)" unique="true"/>
        <column name="name" type="VARCHAR(100)"/>
        <column name="is_income" type="BOOLEAN"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
      <seed_data>
        - client_payment (–ü–ª–∞—Ç—ë–∂ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, income=true)
        - supplier_payment (–ü–ª–∞—Ç—ë–∂ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, income=false)
        - logistics_cost (–õ–æ–≥–∏—Å—Ç–∏–∫–∞, income=false)
        - customs_cost (–¢–∞–º–æ–∂–Ω—è, income=false)
        - tax (–ù–∞–ª–æ–≥–∏, income=false)
        - finance_commission (–ö–æ–º–∏—Å—Å–∏—è —Ñ–∏–Ω–∞–≥–µ–Ω—Ç–∞, income=false)
        - lpr_reward (–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –õ–ü–†, income=false)
        - other_expense (–ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã, income=false)
      </seed_data>
    </table>

    <table name="plan_fact_items">
      <description>–ó–∞–ø–∏—Å–∏ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="deal_id" type="UUID" fk="deals.id"/>
        <column name="category_id" type="UUID" fk="plan_fact_categories.id"/>
        <column name="description" type="VARCHAR(255)"/>
        <column name="planned_amount" type="DECIMAL(15,2)"/>
        <column name="planned_currency" type="VARCHAR(3)"/>
        <column name="planned_date" type="DATE"/>
        <column name="actual_amount" type="DECIMAL(15,2)"/>
        <column name="actual_currency" type="VARCHAR(3)"/>
        <column name="actual_date" type="DATE"/>
        <column name="actual_exchange_rate" type="DECIMAL(10,4)"/>
        <column name="variance_amount" type="DECIMAL(15,2)"/>
        <column name="payment_document" type="VARCHAR(100)"/>
        <column name="notes" type="TEXT"/>
        <column name="created_by" type="UUID" fk="auth.users.id"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="updated_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>

    <!-- TELEGRAM -->

    <table name="telegram_users">
      <description>–°–≤—è–∑—å Telegram —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="user_id" type="UUID" fk="auth.users.id"/>
        <column name="telegram_id" type="BIGINT" unique="true"/>
        <column name="telegram_username" type="VARCHAR(100)"/>
        <column name="is_verified" type="BOOLEAN" default="false"/>
        <column name="verification_code" type="VARCHAR(10)"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
        <column name="verified_at" type="TIMESTAMPTZ"/>
      </columns>
    </table>

    <table name="notifications">
      <description>–ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</description>
      <columns>
        <column name="id" type="UUID" pk="true"/>
        <column name="user_id" type="UUID" fk="auth.users.id"/>
        <column name="quote_id" type="UUID" fk="quotes.id"/>
        <column name="deal_id" type="UUID" fk="deals.id"/>
        <column name="type" type="VARCHAR(50)"/>
        <column name="title" type="VARCHAR(255)"/>
        <column name="message" type="TEXT"/>
        <column name="channel" type="VARCHAR(20)"/>
        <column name="status" type="VARCHAR(20)" default="pending"/>
        <column name="telegram_message_id" type="BIGINT"/>
        <column name="sent_at" type="TIMESTAMPTZ"/>
        <column name="read_at" type="TIMESTAMPTZ"/>
        <column name="created_at" type="TIMESTAMPTZ" default="NOW()"/>
      </columns>
    </table>
  </database_schema>

  <!-- ============================================ -->
  <!-- ROLES AND PERMISSIONS -->
  <!-- ============================================ -->

  <roles>
    <role code="sales" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º">
      <description>–°–æ–∑–¥–∞—ë—Ç –ö–ü, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</description>
      <workspace>
        <views>–ú–æ–∏ –ö–ü, –ú–æ–∏ —Å–¥–µ–ª–∫–∏, –ö–ª–∏–µ–Ω—Ç—ã</views>
        <actions>
          - –°–æ–∑–¥–∞–Ω–∏–µ –ö–ü (draft)
          - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
          - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–û–õ–¨–ö–û: –Ω–∞—Ü–µ–Ω–∫–∞, —É—Å–ª–æ–≤–∏—è –∫–ª–∏–µ–Ω—Ç–∞, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
          - –ù–ï –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: –∑–∞–∫—É–ø–æ—á–Ω—ã–µ —Ü–µ–Ω—ã, –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
          - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –æ—Ü–µ–Ω–∫—É –∑–∞–∫—É–ø–æ–∫
          - –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π –ö–ü (v1, v2, v3)
          - –û—Ç–ø—Ä–∞–≤–∫–∞ –ö–ü –∫–ª–∏–µ–Ω—Ç—É
          - –ó–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
          - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∞
        </actions>
        <versioning>
          –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ö–ü —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è.
          –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
        </versioning>
      </workspace>
    </role>

    <role code="head_of_sales" name="–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂">
      <description>–í–∏–¥–∏—Ç –ö–ü –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –æ—Ç–¥–µ–ª–∞</description>
      <workspace>
        <views>–í—Å–µ –ö–ü –æ—Ç–¥–µ–ª–∞, –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º</views>
        <actions>
          - –í—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç sales
          - –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–ü —Å–≤–æ–∏—Ö –ø–æ–¥—á–∏–Ω—ë–Ω–Ω—ã—Ö
          - –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ö–ü –º–µ–∂–¥—É –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
        </actions>
      </workspace>
    </role>

    <role code="procurement" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –∑–∞–∫—É–ø–∫–∞–º">
      <description>–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –±—Ä–µ–Ω–¥–∞–º</description>
      <workspace>
        <views>–ö–ü —Å –º–æ–∏–º–∏ –±—Ä–µ–Ω–¥–∞–º–∏</views>
        <fields_editable>
          - –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞
          - –ü–æ—Å—Ç–∞–≤—â–∏–∫ (supplier_id) - –≤—ã–±–æ—Ä –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
          - –ö–æ–º–ø–∞–Ω–∏—è-–∑–∞–∫—É–ø—â–∏–∫ (buyer_company_id) - –≤—ã–±–æ—Ä –∏–∑ –Ω–∞—à–∏—Ö —é—Ä–ª–∏—Ü
          - –ì–æ—Ä–æ–¥/—Å—Ç—Ä–∞–Ω–∞ –∑–∞–±–æ—Ä–∞ (pickup_location_id) - dropdown —Å –ø–æ–∏—Å–∫–æ–º
          - –í–µ—Å (–∫–≥), –û–±—ä—ë–º (–º¬≥)
          - –°—Ä–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (–¥–Ω–µ–π)
          - –£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
          - % –∞–≤–∞–Ω—Å–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
        </fields_editable>
        <fields_readonly>
          - –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (–≤–∏–¥–∏—Ç, –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç)
        </fields_readonly>
        <actions>
          - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏
          - –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ü–µ–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
          - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –ø–æ –±—Ä–µ–Ω–¥—É
        </actions>
      </workspace>
    </role>

    <role code="head_of_procurement" name="–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ –∑–∞–∫—É–ø–æ–∫">
      <description>–í–∏–¥–∏—Ç –≤—Å–µ –∑–∞–∫—É–ø–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</description>
      <workspace>
        <views>–í—Å–µ –ö–ü –Ω–∞ –∑–∞–∫—É–ø–∫–∞—Ö, –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –±—Ä–µ–Ω–¥–∞–º</views>
        <actions>
          - –í—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç procurement
          - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
          - –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
        </actions>
      </workspace>
    </role>

    <role code="logistics" name="–õ–æ–≥–∏—Å—Ç">
      <description>–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º</description>
      <workspace>
        <views>–ö–ü –Ω–∞ –º–æ–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö</views>
        <fields_editable>
          - –°—Ç–æ–∏–º–æ—Å—Ç—å: –ø–æ—Å—Ç–∞–≤—â–∏–∫ ‚Üí —Ö–∞–±
          - –°—Ç–æ–∏–º–æ—Å—Ç—å: —Ö–∞–± ‚Üí —Ç–∞–º–æ–∂–Ω—è
          - –°—Ç–æ–∏–º–æ—Å—Ç—å: —Ç–∞–º–æ–∂–Ω—è ‚Üí –∫–ª–∏–µ–Ω—Ç
          - –û–±—â–∏–π —Å—Ä–æ–∫ –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É (–¥–Ω–µ–π)
          - –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ (–∞–≤—Ç–æ/–º–æ—Ä–µ/–∂/–¥/–∞–≤–∏–∞)
        </fields_editable>
        <assignment>–ü–æ –º–∞—Ä—à—Ä—É—Ç–∞–º (route_logistics_assignments)</assignment>
        <calculation>
          –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—á—ë—Ç–∞:
          - –ü–æ –ø–æ–∑–∏—Ü–∏–∏
          - –ü–æ –æ–±—ä—ë–º—É
          - –ü–æ –≤–µ—Å—É
          - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞
        </calculation>
      </workspace>
    </role>

    <role code="head_of_logistics" name="–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏">
      <description>–í–∏–¥–∏—Ç –≤—Å–µ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</description>
      <workspace>
        <views>–í—Å–µ –ö–ü –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫–µ</views>
        <actions>
          - –í—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç logistics
          - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ª–æ–≥–∏—Å—Ç–∞–º
        </actions>
      </workspace>
    </role>

    <role code="customs" name="–ú–µ–Ω–µ–¥–∂–µ—Ä –¢–û (—Ç–∞–º–æ–∂–µ–Ω–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è)">
      <description>–ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</description>
      <workspace>
        <views>–ö–ü –Ω–∞ —Ç–∞–º–æ–∂–µ–Ω–Ω–æ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏</views>
        <fields_editable>
          - –ö–æ–¥ –¢–ù –í–≠–î (hs_code)
          - –°—Ç–∞–≤–∫–∞ –ø–æ—à–ª–∏–Ω—ã (%)
          - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
        </fields_editable>
        <actions>
          - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
          - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ —Ç–∞–º–æ–∂–Ω–∏
        </actions>
      </workspace>
    </role>

    <role code="quote_controller" name="–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ö–ü">
      <description>–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ö–ü –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–ª–∏–µ–Ω—Ç—É (–ñ–∞–Ω–Ω–∞)</description>
      <workspace>
        <views>–ö–ü –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</views>
        <checklist>
          - –¢–∏–ø —Å–¥–µ–ª–∫–∏ (–ø–æ—Å—Ç–∞–≤–∫–∞/—Ç—Ä–∞–Ω–∑–∏—Ç)
          - –ë–∞–∑–∏—Å –ø–æ—Å—Ç–∞–≤–∫–∏ (Incoterms)
          - –í–∞–ª—é—Ç–∞ –ö–ü
          - –£—Å–ª–æ–≤–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
          - –†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
          - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—É–ø–æ—á–Ω—ã—Ö —Ü–µ–Ω
          - –ù–∞–ª–∏—á–∏–µ —Å—á–µ—Ç–æ–≤ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
          - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏
          - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Ü–µ–Ω–∫–∏
          - –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –õ–ü–†
          - % –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–∑–Ω–∏—Ü—ã
        </checklist>
        <actions>
          - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É (—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º)
          - –û–¥–æ–±—Ä–µ–Ω–∏–µ
          - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä—É
        </actions>
        <invoice_verification>
          –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ —Ä–µ–µ—Å—Ç—Ä–µ.
          –°–≤–µ—Ä—è–µ—Ç —Å—É–º–º—ã –∏ –ø–æ–∑–∏—Ü–∏–∏.
        </invoice_verification>
      </workspace>
    </role>

    <role code="spec_controller" name="–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π">
      <description>–î–≤–∞ —ç—Ç–∞–ø–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π + –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è</description>
      <workspace>
        <views>–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</views>
        <checkpoint_1 name="before_send">
          <description>–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–ª–∏–µ–Ω—Ç—É</description>
          <fields_input>
            - –ù–æ–º–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
            - IDN –ö–ü
            - –î–∞—Ç–∞
            - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
            - –í–∞–ª—é—Ç–∞ –∏ –∫—É—Ä—Å
            - –£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã
            - –Æ—Ä–ª–∏—Ü–æ –ø—Ä–æ–¥–∞–≤—Ü–∞
            - –Æ—Ä–ª–∏—Ü–æ –∫–ª–∏–µ–Ω—Ç–∞
          </fields_input>
          <actions>
            - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
            - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—É
          </actions>
        </checkpoint_1>
        <checkpoint_2 name="after_signature">
          <description>–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∞</description>
          <actions>
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–∫–∞–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—É
            - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏
            - –ü–µ—Ä–µ–≤–æ–¥ –≤ —Å—Ç–∞—Ç—É—Å "–°–¥–µ–ª–∫–∞"
          </actions>
        </checkpoint_2>
      </workspace>
    </role>

    <role code="finance" name="–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä">
      <description>–í–µ–¥—ë—Ç –ø–ª–∞–Ω-—Ñ–∞–∫—Ç –ø–æ —Å–¥–µ–ª–∫–∞–º. –ù–ï —Å–æ–≥–ª–∞—Å—É–µ—Ç –ö–ü!</description>
      <workspace>
        <views>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –ü–ª–∞–Ω-—Ñ–∞–∫—Ç</views>
        <note>–ù–ï —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ –ö–ü - —Ç–æ–ª—å–∫–æ —É—á—ë—Ç –ø–ª–∞—Ç–µ–∂–µ–π</note>
        <actions>
          - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫
          - –í–µ–¥–µ–Ω–∏–µ –ø–ª–∞–Ω-—Ñ–∞–∫—Ç–∞
          - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
          - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –ø–ª–∞–Ω/—Ñ–∞–∫—Ç
          - –û—Ç—á—ë—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
        </actions>
        <payment_categories>
          - –ü–ª–∞—Ç–µ–∂–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω—à–µ–π)
          - –ü–ª–∞—Ç–µ–∂–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
          - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
          - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ —Ç–∞–º–æ–∂–Ω—é
          - –ù–∞–ª–æ–≥–∏
          - –ö–æ–º–∏—Å—Å–∏—è —Ñ–∏–Ω–∞–≥–µ–Ω—Ç–∞
          - –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –õ–ü–†
          - –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã
        </payment_categories>
      </workspace>
    </role>

    <role code="top_manager" name="–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä">
      <description>–°–æ–≥–ª–∞—Å—É–µ—Ç –ö–ü –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤</description>
      <workspace>
        <views>–ö–ü –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏, –í—Å–µ –ö–ü, –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</views>
        <approval_triggers>
          - –í–∞–ª—é—Ç–∞ –ö–ü –Ω–µ —Ä—É–±–ª–∏
          - –£—Å–ª–æ–≤–∏—è –Ω–µ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
          - –ù–∞—Ü–µ–Ω–∫–∞ –Ω–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞
          - –ï—Å—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –õ–ü–†
        </approval_triggers>
        <actions>
          - –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram/Web
          - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
          - –ú–û–ñ–ï–¢ –í–ù–ï–°–¢–ò –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ø—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
          - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ approvals.modifications
        </actions>
        <telegram_buttons>
          - ‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å
          - ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å
          - üìù –ü–æ–¥—Ä–æ–±–Ω–µ–µ
        </telegram_buttons>
      </workspace>
    </role>

    <role code="admin" name="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">
      <description>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</description>
      <workspace>
        <views>–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</views>
        <special_ability>
          –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ò–î–ê: –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–æ–ª—è–º–∏
          –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –≥–ª–∞–∑–∞–º–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏.
          –≠—Ç–æ —Å–∏–º—É–ª—è—Ü–∏—è - –∞–¥–º–∏–Ω –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∞ —Ä–æ–ª–∏,
          —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–∫ —ç—Ç–∞ —Ä–æ–ª—å.
        </special_ability>
        <actions>
          - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
          - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π
          - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –∑–∞–∫—É–ø—â–∏–∫–∞–º
          - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ª–æ–≥–∏—Å—Ç–∞–º
          - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏ (–ª–æ–∫–∞—Ü–∏–∏, –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏, —é—Ä–ª–∏—Ü–∞)
          - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π-–ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –∑–∞–∫—É–ø—â–∏–∫–æ–≤
          - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—É–¥–∏—Ç-–ª–æ–≥–∞
        </actions>
      </workspace>
    </role>
  </roles>

  <!-- ============================================ -->
  <!-- WORKFLOW STATUSES -->
  <!-- ============================================ -->

  <workflow_statuses>
    <status code="draft" name="–ß–µ—Ä–Ω–æ–≤–∏–∫">
      <allowed_transitions>pending_procurement</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="pending_procurement" name="–û–∂–∏–¥–∞–µ—Ç –æ—Ü–µ–Ω–∫–∏ –∑–∞–∫—É–ø–æ–∫">
      <allowed_transitions>pending_logistics_customs</allowed_transitions>
      <actors>procurement</actors>
      <note>–ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –∫–æ–≥–¥–∞ –≤—Å–µ –±—Ä–µ–Ω–¥—ã –æ—Ü–µ–Ω–µ–Ω—ã</note>
    </status>

    <status code="pending_logistics_customs" name="–õ–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ —Ç–∞–º–æ–∂–Ω—è (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)">
      <allowed_transitions>pending_sales_review</allowed_transitions>
      <actors>logistics, customs</actors>
      <note>–ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –∫–æ–≥–¥–∞ –û–ë–ê —ç—Ç–∞–ø–∞ –∑–∞–≤–µ—Ä—à–µ–Ω—ã</note>
    </status>

    <status code="pending_sales_review" name="–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–ü">
      <allowed_transitions>pending_quote_control</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="pending_quote_control" name="–ü—Ä–æ–≤–µ—Ä–∫–∞ –ö–ü">
      <allowed_transitions>pending_sales_review, pending_approval, approved</allowed_transitions>
      <actors>quote_controller</actors>
    </status>

    <status code="pending_approval" name="–ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏">
      <allowed_transitions>approved, rejected</allowed_transitions>
      <actors>top_manager</actors>
    </status>

    <status code="approved" name="–û–¥–æ–±—Ä–µ–Ω–æ">
      <allowed_transitions>sent_to_client</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="sent_to_client" name="–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É">
      <allowed_transitions>client_negotiation, rejected_by_client</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="client_negotiation" name="–¢–æ—Ä–≥–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º">
      <allowed_transitions>pending_spec_control_before, lost</allowed_transitions>
      <actors>sales</actors>
      <note>–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π –ö–ü –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–¥–µ—Å—å</note>
    </status>

    <status code="pending_spec_control_before" name="–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏)">
      <allowed_transitions>pending_signature</allowed_transitions>
      <actors>spec_controller</actors>
    </status>

    <status code="pending_signature" name="–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è">
      <allowed_transitions>pending_spec_control_after</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="pending_spec_control_after" name="–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏">
      <allowed_transitions>deal</allowed_transitions>
      <actors>spec_controller</actors>
    </status>

    <status code="deal" name="–°–¥–µ–ª–∫–∞">
      <allowed_transitions>completed, cancelled</allowed_transitions>
      <actors>finance</actors>
      <note>–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å, –≤–µ–¥—ë—Ç—Å—è –ø–ª–∞–Ω-—Ñ–∞–∫—Ç</note>
    </status>

    <status code="rejected" name="–û—Ç–∫–ª–æ–Ω–µ–Ω–æ">
      <allowed_transitions>draft</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="rejected_by_client" name="–û—Ç–∫–ª–æ–Ω–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–º">
      <allowed_transitions>client_negotiation, lost</allowed_transitions>
      <actors>sales</actors>
    </status>

    <status code="lost" name="–ü—Ä–æ–∏–≥—Ä–∞–Ω">
      <terminal>true</terminal>
    </status>

    <status code="completed" name="–ó–∞–≤–µ—Ä—à–µ–Ω–æ">
      <terminal>true</terminal>
    </status>

    <status code="cancelled" name="–û—Ç–º–µ–Ω–µ–Ω–æ">
      <terminal>true</terminal>
    </status>
  </workflow_statuses>

  <!-- ============================================ -->
  <!-- UI SCREENS -->
  <!-- ============================================ -->

  <ui_screens>
    <screen name="dashboard" path="/dashboard">
      <description>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –∑–∞–¥–∞—á–∏ –ø–æ —Ä–æ–ª–∏</description>
      <role_specific>true</role_specific>
    </screen>

    <screen name="quotes_list" path="/quotes">
      <description>–°–ø–∏—Å–æ–∫ –ö–ü —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Ä–æ–ª–∏</description>
    </screen>

    <screen name="quote_detail" path="/quotes/{id}">
      <description>–î–µ—Ç–∞–ª–∏ –ö–ü —Å —Ñ–æ—Ä–º–æ–π –ø–æ —Ä–æ–ª–∏</description>
      <role_forms>
        - sales: –Ω–∞—Ü–µ–Ω–∫–∞, —É—Å–ª–æ–≤–∏—è –∫–ª–∏–µ–Ω—Ç–∞
        - procurement: –∑–∞–∫—É–ø–æ—á–Ω—ã–µ –ø–æ–ª—è
        - logistics: –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
        - customs: —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è
        - quote_controller: —á–µ–∫-–ª–∏—Å—Ç
        - spec_controller: –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
      </role_forms>
    </screen>

    <screen name="suppliers" path="/suppliers">
      <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</description>
    </screen>

    <screen name="buyer_companies" path="/buyer-companies">
      <description>–ù–∞—à–∏ –∫–æ–º–ø–∞–Ω–∏–∏-–∑–∞–∫—É–ø—â–∏–∫–∏</description>
    </screen>

    <screen name="seller_companies" path="/seller-companies">
      <description>–ù–∞—à–∏ –∫–æ–º–ø–∞–Ω–∏–∏-–ø—Ä–æ–¥–∞–≤—Ü—ã</description>
    </screen>

    <screen name="customers" path="/customers">
      <description>–ö–ª–∏–µ–Ω—Ç—ã —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏</description>
    </screen>

    <screen name="locations" path="/locations">
      <description>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ª–æ–∫–∞—Ü–∏–π</description>
    </screen>

    <screen name="supplier_invoices" path="/supplier-invoices">
      <description>–†–µ–µ—Å—Ç—Ä –∏–Ω–≤–æ–π—Å–æ–≤ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</description>
    </screen>

    <screen name="deals" path="/deals">
      <description>–°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫</description>
    </screen>

    <screen name="plan_fact" path="/deals/{id}/plan-fact">
      <description>–ü–ª–∞–Ω-—Ñ–∞–∫—Ç –ø–æ —Å–¥–µ–ª–∫–µ</description>
    </screen>

    <screen name="admin_users" path="/admin/users">
      <description>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏</description>
    </screen>

    <screen name="admin_brands" path="/admin/brands">
      <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –∑–∞–∫—É–ø—â–∏–∫–∞–º</description>
    </screen>

    <screen name="admin_routes" path="/admin/routes">
      <description>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ª–æ–≥–∏—Å—Ç–∞–º</description>
    </screen>
  </ui_screens>

  <feature_count>~95 features</feature_count>
</project_specification>
